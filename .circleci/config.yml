# Use the latest 2.1 version of CircleCI pipeline process engine. 
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
orbs:
   aws-cli: circleci/aws-cli@2.0
   serverless: circleci/serverless-framework@1.0
jobs:
   deploy:
     executor: serverless/default
     steps:
       - checkout
       - aws-cli/setup
       - serverless/setup
       - run:
           name: "Install npm packages"
           command: npm i
       - run:
           name: "Deploy"
           command: sls deploy -v

workflows:
  step-one:
    jobs:
      - deploy